<html>
<body>
<h1>${instances.size()} instance(s)</h1>
<div id="instances" style="padding: 2px; border: 1px solid black" >
<ul>
   	
   	#{list items:instances, as:'instance'}
        <li>
            vehicleId: ${instance.vehicleId}, 
            recordsProcessed: ${instance.recordsProcessed}
            #{if instance.totalRecords > 0}/${instance.totalRecords}
            #{/if}<br>
            isSimulation: ${instance.isSimulation}
            <br>
            Initial Parameters:
            <ul>
              <li> obsVariance: ${instance.initialParameters.obsVariance} </li>
              <li> onRoadStateVariance: ${instance.initialParameters.onRoadStateVariance} </li>
              <li> offRoadStateVariance: ${instance.initialParameters.offRoadStateVariance} </li>
              <li> offTransitionProbs: ${instance.initialParameters.offTransitionProbs} </li>
              <li> onTransitionProbs: ${instance.initialParameters.onTransitionProbs} </li>
              <li> numParticles: ${instance.initialParameters.numParticles} </li>
              <li> filterTypeName: ${instance.initialParameters.filterTypeName} </li>
              <li> seed: ${instance.simSeed} </li>
            </ul>
            <span>
                <a href="/application/removeInferenceInstance?vehicleId=${instance.vehicleId}">Delete</a> 
                <a href="/application/map?vehicleId=${instance.vehicleId}" target="_blank">View Map</a> 
                <a href="/api/traces?vehicleId=${instance.vehicleId}" target="_blank">View Traces</a> 
                <a href="/api/getPerformanceResults?vehicleId=${instance.vehicleId}" target="_blank">View Perf. Results</a> 
            </span>
        </li>
    #{/list}
</ul>
</div>

<div id="upload" style="padding: 2px; border: 1px solid black">
	 #{form @Application.uploadHandler(), enctype:'multipart/form-data'}
   
    <select name="filterTypeName">
     	#{list items:filters, as:'filter'}
      <option value="${filter}">${filter}</option>
      #{/list}
    </select><br>
    
	 	<input name="obs_variance_pair" type="text" value="100, 100"/> 
	   <label for="obs_variance_pair">Observation Variance (x,y) in meters</label><br>
	 	<input name="road_state_variance_pair" type="text" value="6.25e-4, 6.25e-4"/> 
	   <label for="road_state_variance_pair">On-road State Variance (errors due to acceleration, (dist,velocity))</label><br>
	 	<input name="ground_state_variance_pair" type="text" value="6.25e-4, 6.25e-4"/> 
	    <label for="ground_state_variance_pair">Off-road State Variance (errors due to acceleration, (location,velocity))</label><br>
	 	<input name="off_prob_pair" type="text" value="5e-2, 1"/>
	    <label for="off_prob_pair">Off- to off-road, off- to on-road weights (unnormalized)</label><br>
	 	<input name="on_prob_pair" type="text" value="1, 5e-2"/>
	    <label for="on_prob_pair">On- to on-road, on- to off-road weights (unnormalized)</label><br>
	 	<input name="numParticles_str" type="text" value="50"/>
	    <label for="numParticles_str">Number of particles</label><br>
	 	<input name="debugEnabled" id="debugEnabled" type="checkbox" value="true"/>
	    <label for="enableDebug">Enable debug for this trace</label><br>
	 				<input name="csv" type="file"/>
	                <input type="submit"/>
	 #{/form}
</div>

<div id="simulate" style="padding: 2px; border: 1px solid black">
	#{form @Application.simulation(), method:'GET'}
    <select name="filterTypeName">
     	#{list items:filters, as:'filter'}
      <option value="${filter}">${filter}</option>
      #{/list}
    </select><br>
    
	 	<input name="seed_str" type="text" value="0"/>
	   <label for="seed_str">Random seed (enter 0 for none)</label><br>
	 	<input name="start_coordinate_pair" type="text" value="10.300252, 123.90609"/> 
	   <label for="start_coordinate_pair">Start coordinates (lat,lon)</label><br>
	 	<input name="start_unix_time" type="text" value="1325570441000"/> 
	   <label for="start_unix_time">Start (unix) time * 1000</label><br>
	 	<input name="duration_str" type="text" value="3600"/> 
	   <label for="duration_str">Duration (secs)</label><br>
	 	<input name="frequency_str" type="text" value="30"/> 
	   <label for="frequency_str">Observation Frequency (secs)</label><br>
	 	<input name="obs_variance_pair" type="text" value="100, 100"/> 
	   <label for="obs_variance_pair">Observation Variance (x,y) in meters</label><br>
	 	<input name="road_state_variance_pair" type="text" value="6.25e-4, 6.25e-4"/> 
	   <label for="road_state_variance_pair">On-road State Variance (errors due to acceleration, (dist,velocity))</label><br>
	 	<input name="ground_state_variance_pair" type="text" value="6.25e-4, 6.25e-4"/> 
	    <label for="ground_state_variance_pair">Off-road State Variance (errors due to acceleration, (location,velocity))</label><br>
	 	<input name="off_prob_pair" type="text" value="5e-2, 1"/>
	    <label for="off_prob_pair">Off- to off-road, off- to on-road weights (unnormalized)</label><br>
	 	<input name="on_prob_pair" type="text" value="1, 5e-2"/>
	    <label for="on_prob_pair">On- to on-road, on- to off-road weights (unnormalized)</label><br>
	 	<input name="numParticles_str" type="text" value="50"/>
	    <label for="numParticles_str">Number of particles</label><br>
	 	<input name="performInference" id="performInference" type="checkbox" value="true" checked="checked"/>
	    <label for="performInference">Perform inference for this simulation</label><br>
	  <input type="submit" value="Simulate">
	#{/form}

</div>
<div id="defaultParams" style="padding: 2px; border: 1px solid black">
	#{form @Application.setDefaultVehicleStateParams(), method:'GET'}
    <select name="filterTypeName">
     	#{list items:filters, as:'filter'}
      <option value="${filter}">${filter}</option>
      #{/list}
    </select><br>
	 	<input name="obs_variance_pair" type="text" value="100, 100"/> 
	   <label for="obs_variance_pair">Observation Variance (x,y) in meters</label><br>
	 	<input name="road_state_variance_pair" type="text" value="6.25e-4, 6.25e-4"/> 
	   <label for="road_state_variance_pair">On-road State Variance (errors due to acceleration, (dist,velocity))</label><br>
	 	<input name="ground_state_variance_pair" type="text" value="6.25e-4, 6.25e-4"/> 
	    <label for="ground_state_variance_pair">Off-road State Variance (errors due to acceleration, (location,velocity))</label><br>
	 	<input name="off_prob_pair" type="text" value="5e-2, 1"/>
	    <label for="off_prob_pair">Off- to off-road, off- to on-road weights (unnormalized)</label><br>
	 	<input name="on_prob_pair" type="text" value="1, 5e-2"/>
	    <label for="on_prob_pair">On- to on-road, on- to off-road weights (unnormalized)</label><br>
	 	<input name="numParticles_str" type="text" value="50"/>
	    <label for="numParticles_str">Number of particles</label><br>
	  <input type="submit" value="Change Default Initial Parameters">
	#{/form}
</div>
</body>
</html>
